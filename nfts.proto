syntax = "proto3";


package nfts.proto;

message NftEventKey {
  string id = 1;
  // the user that triggered the event
  string user_id = 2;
}

enum Blockchain {
  BLOCKCHAIN_UNSPECIFIED = 0;
  BLOCKCHAIN_SOLANA = 1;
  BLOCKCHAIN_POLYGON = 2;
  BLOCKCHAIN_ETHEREUM = 3;
}

message Transaction {
  bytes serialized_message = 1;
  repeated string signed_message_signatures = 2;
  Blockchain blockchain = 3;
}

message DropTransaction {
  Transaction transaction = 1;
  string project_id = 2;
}

message MintTransaction {
  Transaction transaction = 1;
  string project_id = 2;
  string drop_id = 3;
}


message UpdateMetadataTransaction {
  Transaction transaction = 1;
  string project_id = 2;
  string drop_id = 3;
}

message TransferMintTransaction {
  Transaction transaction = 1;
  string address = 2;
  string sender = 3;
  string recipient = 4;
  string project_id = 5;
  string transfer_id = 6;
}

message EditionInfo {
  string description = 1;
  string image_uri = 2;
  string collection = 3;
  string uri = 4;
  string creator = 5;
}

message CreateEditionTransaction {
  EditionInfo edition_info = 1;
  string project_id = 2;
  int64 edition_id = 4;
  string receiver = 5;
  int64 amount = 6;
  string fee_receiver = 8;
  int32 fee_numberator = 7;
}

message MintEditionTransaction {
  int64 edition_id = 1;
  string receiver = 2;
  int64 amount = 3;
}

message UpdateEdtionTransaction {
  EditionInfo edition_info = 1;
  string project_id = 2;
}

message NftEvents{
  oneof event {
    DropTransaction create_drop = 4;
    MintTransaction mint_drop = 5;
    UpdateMetadataTransaction update_metadata = 6;
    TransferMintTransaction transfer_mint = 7;
    MintTransaction retry_mint = 8;
    DropTransaction retry_drop = 9;
    CreateEditionTransaction create_polygon_edition = 10;
    MintEditionTransaction mint_polygon_edition = 11;
    UpdateEdtionTransaction update_polygon_edition = 12;
  }
}
